(function(){"use strict";var i={7491:function(i,e,s){var t=s(9242),l=s(3396);const a={class:"app"};function o(i,e,s,t,o,n){const r=(0,l.up)("MyHeader"),m=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(r,{onSearchFilms:n.searchFilms},null,8,["onSearchFilms"]),(0,l.Wm)(m,{allFilms:i._allFilms,searchNameFilm:o.searchNameFilm},null,8,["allFilms","searchNameFilm"])])}var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAAJwAAACcBKgmRTwAABQ5JREFUWMOtl01sVFUUx3/n3jfTMtNGJQEihrIgsYALXYBRiUE3YqQR0YUhGMG9XwmSuDNudIHRRNckEHDLjgUbQEIRQTEq0oomaglU6gfy0Xam8979u7jvzUwLlE7lJDcz99537/mfc8+ncQfKvqgCeEQ/smcR65CtRLYcURUG4gayEWQ/IY4jO4QYxsiS5/6Z9X673UY4VgHDIx5Ftk1iA7JlCI+MOCAHQNtahuyCxCFke4DTQFYa+HtuAHS8ihTAWIrsbcR2ZIs0jUnBtA0AQGjt59+PIfYi+wRj1JnDD4zdHkA43gV4QGuBjxBPIjNkKHModZFB87QwJzC1SWAodShzBRghvgB2gM4IT/n5sZsBhBNdUQLjGeBTZP0IyDyhnkDmmkzjmAHA2vYAMpef88UTDQGvYxwmQOmFP1sANFhC5gDWgu3LDQ7VE0KtFIE5YTY3AGaAEwQjTJbQVFI82zmw7cBpZwG/6S+iWM5hxgMYu4B+ANVKhImuKPltTXUWEuADrlrHuhvF6mrELokHspCz1skyuOCAt4D1AKqXCBPlKDkBFECKv4T89vy/1NpT+14W151wlSmsqwliPfCWUu+mDiwhyQ3nMYztCJQ6wnhhDwHreRDr24KVemmae6ERa5+rbR0su4Yu74HaeXDgqnVC6lHDg2yb+XAAOJngcWS8CixCoPEuSF1+ubBlW3Ar3pzHG8Dl0V+5rzFEuSuBJGCVKXRtAYjFwFZLOeUIrMLYAEKNhFAvTffSpHdezAGuTxiNtKUY1z2FldLCRjbKs8oBG4BlheHFd787ZBZHk5yw7rSY9QFPOdA6wBNcdJdZSBL/XjxF7erI/EGVG9FFwYM94YCVQCvS3YGuDO9h/MSLXP3xY2rXfkd3PDEDQBIwnxXTRxxGHxD9fQ7q9xboCUN0j7xP/fRLXP3hAyav/Iw0RyhO4PNvRZ8DeqIGjLlFHAMcSeLoDeepXPqQxjeb+ff795gavzg3LfhQ/O2Z8egdKFQxuiYeeitGWi1j1rkBJ8ANoKcN1Rw4Z4DDqv3Y0pexxS9QqqyYmwYV7S2n6wliBFiNj2FzWrq95XmH9T6EW74VW7IZFizvTGRZW2ZlJAGGgdXmA5aEGCpnoYWrXiO5512s0texuoFWrRDpOwc2CGS4gJXTWQ+bGb33r8XNkznERJd7WwY64YBDwAUgpk3XqWd3QCHWGDmNAEcdxhDiEBhWSnGt3A0I0uvzl1bTDTvUyqiRAzAOWtBQQiAAe4HNGIutUo92kMeFMPI5f4z+xo1abuPtKThPw1ak42IdEIHsyhFKC33cSR2aKBefXQb2y1uIcExfEWwvsNOSgKvWCDe6QQ7Gf+HedJieMKMkc+Tl14x6MJ+bidJ9jlLJYmk23t0K9abdoeFPuyTkMnzZBbBUsB/Z0wg0WSZM5ohdZNSs9W6qAdvmrgVAJhCEyTIq7pIdFrwCjJY3j9H0B4lLiHeAc4VBukodfMjr/3xo+iiU375ffE8WqyvVmjXGWYydZoz6nLMDsMfr8fGCnUG80QRRTvHVKayc0UmUlUBTnmy8zejgLPA6pjMg/KaxdpPJrXSwG4ID0xpiY7K+2en8v8bkKLBD6FunhGTT5dYVN6E/VkV2V1uz3cg+i61ZwA9Mb1Znb05jn7YG2SsSAx02pweR7UN8jXXQnM6k7GgVkAfrzz1kHbKHb9GeX0D2HWIQ2RHEMJAlG2dvz/8DqQOzyKNRS4IAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDItMDdUMTE6NDM6MTYrMDE6MDCaXD24AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTAyLTA3VDExOjQzOjE2KzAxOjAw6wGFBAAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE2LTA2LTE2IFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ+a/NLYAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADUxMsDQUFEAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNDg2NDY0MTk2PhwtwAAAABN0RVh0VGh1bWI6OlNpemUAMjUuNktCQtYjHksAAAB1dEVYdFRodW1iOjpVUkkAZmlsZTovLy4vdXBsb2Fkcy9jYXJsb3NwcmV2aS90aTlqZFg2LzExNDYvMTQ4NjQ4NTU4Mi0zMTFhcnJvdy1maWxtLW1vdmllLXBsYXktcGxheWVyLXN0YXJ0LXZpZGVvXzgxMTc3LnBuZwD1cswAAAAASUVORK5CYII=";const r=i=>((0,l.dD)("data-v-7fa567ab"),i=i(),(0,l.Cn)(),i),m={class:"navbar navbar-expand-md navbar-dark sticky-top header"},d={class:"container-fluid"},c=r((()=>(0,l._)("img",{src:n,alt:""},null,-1))),h=r((()=>(0,l._)("button",{class:"navbar-toggle navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarMain"},[(0,l._)("span",{class:"navbar-toggler-icon"})],-1))),u={class:"collapse navbar-collapse",id:"navbarMain"},k={class:"navbar-nav ml-auto"},g={class:"nav-item active"},p={class:"nav-item"},F={class:"d-none d-md-block search-film"},f={class:"d-block d-md-none search-film search-film-small"};function v(i,e,s,t,a,o){const n=(0,l.up)("router-link"),r=(0,l.up)("FormSearch");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("nav",m,[(0,l._)("div",d,[(0,l.Wm)(n,{to:"/",class:"navbar-brand",onClick:o.cleanSearchInput},{default:(0,l.w5)((()=>[c])),_:1},8,["onClick"]),(0,l.Wm)(n,{to:"/",class:"navbar-brand mylogo",onClick:o.cleanSearchInput},{default:(0,l.w5)((()=>[(0,l.Uk)("КиноПоиск")])),_:1},8,["onClick"]),h,(0,l._)("div",u,[(0,l._)("ul",k,[(0,l._)("li",g,[(0,l.Wm)(n,{to:"/",class:"nav-link",onClick:o.cleanSearchInput},{default:(0,l.w5)((()=>[(0,l.Uk)("Главная")])),_:1},8,["onClick"])]),(0,l._)("li",p,[(0,l.Wm)(n,{to:"/BookmarksEstimates",class:"nav-link",onClick:o.cleanSearchInput},{default:(0,l.w5)((()=>[(0,l.Uk)("Закладки|Оценки")])),_:1},8,["onClick"])])])]),(0,l._)("div",F,[(0,l.Wm)(r,{onSearch:o.getNameFilm},null,8,["onSearch"])])])]),(0,l._)("div",f,[(0,l.Wm)(r,{onSearch:o.getNameFilm},null,8,["onSearch"])])],64)}const A={class:"form-search d-flex"};function b(i,e,s,a,o,n){return(0,l.wg)(),(0,l.iD)("div",A,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":[e[0]||(e[0]=i=>o.nameFilm=i),e[2]||(e[2]=(...i)=>n.searchFilm&&n.searchFilm(...i))],onKeyup:e[1]||(e[1]=(0,t.D2)(((...i)=>n.searchFilm&&n.searchFilm(...i)),["enter"])),class:"form-control mr-2",type:"text",placeholder:"поиск...","aria-label":"Search",name:"nameFilm",id:"search"},null,544),[[t.nr,o.nameFilm]]),(0,l._)("button",{onClick:e[3]||(e[3]=(...i)=>n.searchFilm&&n.searchFilm(...i)),class:"btn btn-outline-success"},"Найти")])}var S={name:"FormSearch",data(){return{nameFilm:"",isSearch:!1}},methods:{searchFilm(){this.isSearch=!0,this.$emit("search",this.nameFilm)}}},w=s(89);const D=(0,w.Z)(S,[["render",b],["__scopeId","data-v-7b059ede"]]);var _=D,L={name:"MyHeader",components:{FormSearch:_},methods:{getNameFilm(i){this.$emit("searchFilms",i)},cleanSearchInput(){this.getNameFilm(""),document.getElementById("search").value=""}}};const y=(0,w.Z)(L,[["render",v],["__scopeId","data-v-7fa567ab"]]);var B=y,I=s(65),C={components:{MyHeader:B},data(){return{searchNameFilm:"",isSearch:!1}},mounted(){this.fetchFilms()},methods:{...(0,I.nv)({fetchFilms:"fetchFilms"}),searchFilms(i){this.searchNameFilm=i,this.isSearch=!0}},computed:{...(0,I.rn)({_allFilms:i=>i.allFilms})}};const W=(0,w.Z)(C,[["render",o]]);var N=W,E=s(2483),M=s(7139);const Y={class:"filter"},z={class:"sort"};function O(i,e,s,t,a,o){const n=(0,l.up)("SelectWithDisabledOption"),r=(0,l.up)("FilmList"),m=(0,l.up)("BasePagination");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",{class:(0,M.C_)(["filter-sort",a.isSearch?"block-none":""])},[(0,l._)("div",Y,[(0,l.Wm)(n,{modelValue:a.selectedFilter,"onUpdate:modelValue":e[0]||(e[0]=i=>a.selectedFilter=i),options:a.typeFilm,nameSelect:a.nameSelect[0],class:"filter-select"},null,8,["modelValue","options","nameSelect"])]),(0,l._)("div",z,[(0,l.Wm)(n,{modelValue:a.selectedSort,"onUpdate:modelValue":e[1]||(e[1]=i=>a.selectedSort=i),options:a.sortOptions,nameSelect:a.nameSelect[1],class:"sort-select"},null,8,["modelValue","options","nameSelect"])])],2),(0,l._)("p",{class:(0,M.C_)(["mess",""===a.mess?"block-none":""])},(0,M.zw)(a.mess),3),(0,l.Wm)(r,{films:a.films},null,8,["films"]),(0,l.Wm)(m,{page:a.page,totalPages:a.totalPages,onChange:o.changePage,class:(0,M.C_)({"block-none":a.totalPages<=1})},null,8,["page","totalPages","onChange","class"])])}s(7658);const P={class:"list_film"};function x(i,e,s,t,a,o){const n=(0,l.up)("FilmCardSmall");return(0,l.wg)(),(0,l.iD)("div",P,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.films,(i=>((0,l.wg)(),(0,l.j4)(n,{key:i.id,film:i},null,8,["film"])))),128))])}const T=["id"],V={class:"rating"},j=["src"],G={class:"card-body"},Z=["title"],R={class:"card-text"},H={class:"BookmarksEstimates"};function U(i,e,s,t,a,o){return(0,l.wg)(),(0,l.iD)("div",{class:"cardFilm",id:s.film.id},[(0,l._)("div",{class:"card",onClick:e[0]||(e[0]=i=>o.goInfoFilm(s.film.id))},[(0,l._)("p",V,(0,M.zw)(s.film.rating.imdb),1),(0,l._)("img",{src:s.film.poster.url,class:"card-img-top",alt:""},null,8,j),(0,l._)("div",G,[(0,l._)("h5",{class:"card-title","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:s.film.name},(0,M.zw)(s.film.name),9,Z),(0,l._)("p",R,(0,M.zw)(s.film.year)+", "+(0,M.zw)(s.film.movieLength)+" мин",1)])]),(0,l._)("div",H,[(0,l._)("p",{class:"delete",onClick:e[1]||(e[1]=i=>o.delBookmarks(s.film.id))},"X"),(0,l._)("p",{class:(0,M.C_)(["myEstimates",{myEstimatesLike:i.allLikes.includes(s.film.id),myEstimatesDislike:i.allDislikes.includes(s.film.id)}])},null,2)])],8,T)}var Q={name:"FilmCardSmall",data(){return{isSearch:!1}},props:{film:Object},computed:{...(0,I.rn)({allBookmarks:i=>i.businessLogicBookmarks.bookmarks,allLikes:i=>i.businessLogicLike.like,allDislikes:i=>i.businessLogicDislike.dislike})},methods:{...(0,I.nv)({deleteBookmarks:"deleteBookmarks"}),delBookmarks(i){this.deleteBookmarks(i),document.getElementById(i).style.display="none"},goInfoFilm(i){this.isSearch=!1,this.$root.searchNameFilm="",document.getElementById("search").value="",this.$router.push(`/film/${i}`)}}};const X=(0,w.Z)(Q,[["render",U],["__scopeId","data-v-a0285d86"]]);var J=X,K={name:"FilmList",components:{FilmCardSmall:J},props:{films:{type:Array,default:()=>[]}}};const q=(0,w.Z)(K,[["render",x],["__scopeId","data-v-9485376c"]]);var $=q;const ii=i=>((0,l.dD)("data-v-0d5ab15a"),i=i(),(0,l.Cn)(),i),ei={"aria-label":"Page navigation example",class:"pageNav"},si={class:"pagination"},ti=ii((()=>(0,l._)("span",{"aria-hidden":"true"},"«",-1))),li=[ti],ai=["onClick"],oi=ii((()=>(0,l._)("span",{"aria-hidden":"true"},"»",-1))),ni=[oi];function ri(i,e,s,t,a,o){return(0,l.wg)(),(0,l.iD)("nav",ei,[(0,l._)("ul",si,[(0,l._)("li",{onClick:e[0]||(e[0]=i=>s.page>1?o.changePage(s.page-1):null),class:(0,M.C_)(["page-item",1===s.page?"item-disabled":""])},[(0,l._)("a",{class:(0,M.C_)(["page-link",{"link-disabled":1===s.page}]),href:"#","aria-label":"Previous"},li,2)],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.totalPages,(i=>((0,l.wg)(),(0,l.iD)("li",{key:i,onClick:e=>o.changePage(i),class:(0,M.C_)({"current-page":s.page===i})},[(0,l._)("a",{class:(0,M.C_)(["page-link",s.page===i?"current-page":""]),href:"#"},(0,M.zw)(i),3)],10,ai)))),128)),(0,l._)("li",{class:(0,M.C_)(["page-item",s.page===s.totalPages?"item-disabled":""]),onClick:e[1]||(e[1]=i=>s.page<s.totalPages?o.changePage(s.page+1):null)},[(0,l._)("a",{class:(0,M.C_)(["page-link",s.page===s.totalPages?"link-disabled":""]),href:"#","aria-label":"Next"},ni,2)],2)])])}var mi={name:"BasePagination",props:{page:Number,totalPages:Number},methods:{changePage(i){this.$emit("change",i)}}};const di=(0,w.Z)(mi,[["render",ri],["__scopeId","data-v-0d5ab15a"]]);var ci=di;const hi=["value"],ui={disabled:"",value:""},ki=["value"];function gi(i,e,s,t,a,o){return(0,l.wg)(),(0,l.iD)("select",{class:"select-with-disabled-option form-select",value:s.modelValue,onChange:e[0]||(e[0]=(...i)=>o.changeOption&&o.changeOption(...i))},[(0,l._)("option",ui,(0,M.zw)(s.nameSelect),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.options,(i=>((0,l.wg)(),(0,l.iD)("option",{key:i.value,value:i.value},(0,M.zw)(i.name),9,ki)))),128))],40,hi)}var pi={name:"SelectWithDisabledOption",props:{modelValue:String,options:{type:Array,default:()=>[]},nameSelect:{type:String,default:"--Не выбрано--"}},methods:{changeOption(i){this.$emit("update:modelValue",i.target.value)}}};const Fi=(0,w.Z)(pi,[["render",gi],["__scopeId","data-v-66bc9b88"]]);var fi=Fi,vi={components:{FilmList:$,BasePagination:ci,SelectWithDisabledOption:fi,MyHeader:B},data(){return{films:[],allFilmSort:[],page:1,filmsPerPage:25,totalPages:0,typeFilm:[{value:"all",name:"all"}],selectedFilter:"",selectedSort:"",nameSelect:["Тип","Сортировка"],sortOptions:[{value:"year",name:"По году"},{value:"rating",name:"По рейтингу"},{value:"movieLength",name:"По хронометражу"}],isSort:!1,isFilter:!1,isSearch:!1,mess:""}},props:{allFilms:{type:Array,default:()=>[]},searchNameFilm:String},mounted(){this.outputListFilms()},computed:{getTotalPages(){this.isSort||this.isFilter||this.isSearch?this.totalPages=Math.ceil(this.allFilmSort.length/this.filmsPerPage):this.totalPages=Math.ceil(this.allFilms.length/this.filmsPerPage)}},methods:{paginationFilms(i,e){this.getTotalPages;let s=(i-1)*this.filmsPerPage,t=i*this.filmsPerPage;this.films=e.filter((i=>e.indexOf(i)>=s&&e.indexOf(i)<t))},changePage(i){this.page=i},outputListFilms(){this.paginationFilms(this.page,this.allFilms);let i=[...new Set(this.allFilms.map((i=>i.type)))];for(let e=0;e<i.length;e++)this.typeFilm.push({value:i[e],name:i[e]})},searchFilms(i){this.isSearch=!0,this.isFilter=!1,this.isSort=!1,this.page=1;let e=Array.from(this.allFilms);this.allFilmSort=e.filter((e=>this.checkNameFilm(e.name,i)>0)),this.paginationFilms(this.page,this.allFilmSort),0===this.allFilmSort.length?this.mess="По Вашему запросу ничего не найдено":this.mess=""},checkNameFilm(i,e){let s=0;for(let t of i.toLowerCase().split(" "))t.length>1&&(s=t.startsWith(e)?s+1:s);return s}},watch:{searchNameFilm(){let i=this.searchNameFilm;i=i.trim(),i=i.toLowerCase(),""!==i?this.searchFilms(i):(this.isSearch=!1,this.mess="",this.paginationFilms(this.page,this.allFilms))},allFilms(){this.outputListFilms()},page(){this.isSort||this.isFilter||this.isSearch?this.paginationFilms(this.page,this.allFilmSort):this.paginationFilms(this.page,this.allFilms)},selectedFilter(i){this.isFilter=!0;let e=Array.from(this.allFilms);"all"!==i&&""!==i?this.allFilmSort=e.filter((e=>e.type===i)):(this.isFilter=!1,this.allFilmSort=e),this.selectedSort="",this.page=1,0===this.allFilmSort.length&&(this.mess="По Вашему запросу ничего не найдено"),this.paginationFilms(this.page,this.allFilmSort)},selectedSort(i){this.isSort=!0;let e=[];e=this.isFilter?Array.from(this.allFilmSort):Array.from(this.allFilms),"year"===i?this.allFilmSort=e.sort(((i,e)=>i.year<e.year?1:-1)):"rating"===i?this.allFilmSort=e.sort(((i,e)=>i.rating.imdb<e.rating.imdb?1:-1)):"movieLength"===i&&(this.allFilmSort=e.sort(((i,e)=>i.movieLength<e.movieLength?1:-1))),this.paginationFilms(this.page,this.allFilmSort)}}};const Ai=(0,w.Z)(vi,[["render",O]]);var bi=Ai;function Si(i,e,s,t,a,o){const n=(0,l.up)("FilmCardBig"),r=(0,l.up)("RecommendationFilms"),m=(0,l.up)("MyMain");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",{class:(0,M.C_)(["film-id-page",a.isSearch?"block-none":""])},[(0,l.Wm)(n,{infoFilmId:a.infoFilmId},null,8,["infoFilmId"]),(0,l.Wm)(r)],2),(0,l.Wm)(m,{allFilms:s.allFilms,ref:"main",class:(0,M.C_)({"block-none":!a.isSearch})},null,8,["allFilms","class"])],64)}const wi=i=>((0,l.dD)("data-v-5efda3a4"),i=i(),(0,l.Cn)(),i),Di={class:"all-info-film"},_i={class:"row1"},Li={class:"logo-infa"},yi={class:"logo-film"},Bi=["src"],Ii={class:"infa"},Ci=wi((()=>(0,l._)("p",{class:"description"},"Описание:",-1))),Wi={class:"description"},Ni={class:"poster"},Ei=["src"],Mi={class:"small-block-info"},Yi=wi((()=>(0,l._)("p",{class:"description1"},"Описание:",-1))),zi={class:"description1"};function Oi(i,e,s,t,a,o){const n=(0,l.up)("ActionsFilm");return(0,l.wg)(),(0,l.iD)("div",Di,[(0,l._)("div",_i,[(0,l._)("div",Li,[(0,l._)("div",yi,[(0,l._)("img",{src:a.logoFilm,alt:""},null,8,Bi)]),(0,l._)("div",Ii,[(0,l._)("p",null,(0,M.zw)(a.ratingFilm)+" "+(0,M.zw)(s.infoFilmId.year)+"г. "+(0,M.zw)(s.infoFilmId.type)+" "+(0,M.zw)(s.infoFilmId.movieLength)+"мин. ",1),(0,l._)("h2",null,(0,M.zw)(s.infoFilmId.name)+" ( "+(0,M.zw)(s.infoFilmId.alternativeName)+" )",1),(0,l._)("p",null,(0,M.zw)(s.infoFilmId.shortDescription),1),Ci,(0,l._)("p",Wi,(0,M.zw)(s.infoFilmId.description),1)]),(0,l.Wm)(n,{idFilm:s.infoFilmId.id,class:"actions-film"},null,8,["idFilm"])]),(0,l._)("div",Ni,[(0,l._)("img",{src:a.posterFilm,alt:""},null,8,Ei),(0,l.Wm)(n,{idFilm:s.infoFilmId.id,class:"actions-film"},null,8,["idFilm"])])]),(0,l._)("div",Mi,[Yi,(0,l._)("p",zi,(0,M.zw)(s.infoFilmId.description),1)])])}const Pi=i=>((0,l.dD)("data-v-87a07222"),i=i(),(0,l.Cn)(),i),xi={class:"actions-film"},Ti=Pi((()=>(0,l._)("p",null,null,-1))),Vi=Pi((()=>(0,l._)("button",null,null,-1))),ji=[Ti,Vi],Gi={class:"estimate"};function Zi(i,e,s,t,a,o){return(0,l.wg)(),(0,l.iD)("div",xi,[(0,l._)("div",{class:(0,M.C_)(["add-bookmarks",a.flag["isBookmarks"]?"is-bookmarks":""]),onClick:e[0]||(e[0]=i=>o.actBookmarks())},ji,2),(0,l._)("div",Gi,[(0,l._)("button",{class:(0,M.C_)(["like",a.flag["isLike"]?"is-like":""]),id:"like",onClick:e[1]||(e[1]=i=>o.actLikes())},null,2),(0,l._)("button",{class:(0,M.C_)(["dislike",a.flag["isDislike"]?"is-dislike":""]),id:"dislike",onClick:e[2]||(e[2]=i=>o.actDislikes())},null,2)])])}var Ri={name:"ActionsFilm",props:{idFilm:{type:Number,required:!0}},data(){return{flag:{isBookmarks:!1,isLike:!1,isDislike:!1}}},computed:{...(0,I.rn)({allBookmarks:i=>i.businessLogicBookmarks.bookmarks,allLikes:i=>i.businessLogicLike.like,allDislikes:i=>i.businessLogicDislike.dislike})},watch:{idFilm(){this.allBookmarks.includes(this.idFilm)&&(this.flag["isBookmarks"]=!0),this.allLikes.includes(this.idFilm)&&(this.flag["isLike"]=!0),this.allDislikes.includes(this.idFilm)&&(this.flag["isDislike"]=!0)}},methods:{...(0,I.nv)({addBookmarks:"addBookmarks",deleteBookmarks:"deleteBookmarks",addLike:"addLike",deleteLike:"deleteLike",addDislike:"addDislike",deleteDislike:"deleteDislike"}),actBookmarks(){this.allBookmarks.includes(this.idFilm)&&(this.flag["isBookmarks"]=!0),this.flag["isBookmarks"]?(this.deleteBookmarks(this.idFilm),this.flag["isBookmarks"]=!1):(this.addBookmarks(this.idFilm),this.flag["isBookmarks"]=!0)},actLikes(){this.allLikes.includes(this.idFilm)&&(this.flag["isLike"]=!0),this.flag["isLike"]?(this.deleteLike(this.idFilm),this.flag["isLike"]=!1,document.getElementById("like").disabled=!1,document.getElementById("dislike").disabled=!1):(this.addLike(this.idFilm),this.flag["isLike"]=!0,document.getElementById("dislike").disabled=!0)},actDislikes(){this.allDislikes.includes(this.idFilm)&&(this.flag["isDislike"]=!0),this.flag["isDislike"]?(this.deleteDislike(this.idFilm),this.flag["isDislike"]=!1,document.getElementById("like").disabled=!1,document.getElementById("dislike").disabled=!1):(this.addDislike(this.idFilm),this.flag["isDislike"]=!0,document.getElementById("like").disabled=!0)}}};const Hi=(0,w.Z)(Ri,[["render",Zi],["__scopeId","data-v-87a07222"]]);var Ui=Hi,Qi={name:"FilmCardBig",components:{ActionsFilm:Ui},data(){return{logoFilm:"",ratingFilm:0,posterFilm:""}},props:{infoFilmId:Object},watch:{infoFilmId(){this.logoFilm=this.infoFilmId.logo.url,this.ratingFilm=this.infoFilmId.rating.imdb,this.posterFilm=this.infoFilmId.poster.url}}};const Xi=(0,w.Z)(Qi,[["render",Oi],["__scopeId","data-v-5efda3a4"]]);var Ji=Xi;const Ki=i=>((0,l.dD)("data-v-7664742d"),i=i(),(0,l.Cn)(),i),qi={class:"recommendation"},$i=Ki((()=>(0,l._)("h3",null,"Рекомендуем посмотреть",-1)));function ie(i,e,s,t,a,o){const n=(0,l.up)("FilmList"),r=(0,l.up)("slide"),m=(0,l.up)("navigation"),d=(0,l.up)("carousel");return(0,l.wg)(),(0,l.iD)("div",qi,[$i,(0,l.Wm)(d,{"items-to-show":1.5},{addons:(0,l.w5)((()=>[(0,l.Wm)(m)])),default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.similarFilms,(i=>((0,l.wg)(),(0,l.j4)(r,{key:a.similarFilms.indexOf(i)},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{films:i,class:"recommendationSimilarFilms"},null,8,["films"])])),_:2},1024)))),128))])),_:1})])}var ee=s(1658),se={name:"recommendationSimilarFilms",components:{Carousel:ee.lr,Slide:ee.Mi,Navigation:ee.W_,FilmList:$},data(){return{infoFilmId:[],similarFilms:[],sizeWimdow:window.innerWidth}},mounted(){this.fetchFilms()},methods:{...(0,I.nv)({fetchFilms:"fetchFilms"}),sliceIntoChunks(i,e){const s=[];for(let t=0;t<i.length;t+=e){const l=i.slice(t,t+e);s.push(l)}return s},getSimilarFilms(){this.infoFilmId=this._allFilms.filter((i=>i.id===parseInt(this.$route.params.id)));let i=this.recommendationSimilarFilms(),e=0;e=this.sizeWimdow<=576?3:this.sizeWimdow>576&&this.sizeWimdow<=768?4:this.sizeWimdow>768&&this.sizeWimdow<=1200?5:6,this.similarFilms=this.sliceIntoChunks(i,e)},ratingLengthSimilarFilms(i){let e=this.infoFilmId[0].rating.imdb,s=this.infoFilmId[0].movieLength,t=this._allFilms.filter((t=>!i.includes(t.id)&&t.id!==this.infoFilmId[0].id&&(t.rating.imdb>=e-1&&t.rating.imdb<=e+1||t.movieLength>=s-10&&t.movieLength<=s+10)));return t},recommendationSimilarFilms(){let i=[this.infoFilmId[0].description,this.infoFilmId[0].shortDescription].join(" "),e=new Map;for(let a=0;a<this._allFilms.length;a++){if(this._allFilms[a].id===this.infoFilmId[0].id)continue;let s=this.textCosineSimilarity(i,[this._allFilms[a].description,this._allFilms[a].shortDescription].join(" "));s>=.15&&e.set(this._allFilms[a].id,s)}e=new Map([...e].sort(((i,e)=>e[1]-i[1])));let s=[],t=0;for(let[a,o]of e)t<10&&s.push(a),t++;let l=[];if(l=this._allFilms.filter((i=>s.includes(i.id))),10!==l.length){let i=this.ratingLengthSimilarFilms(s);i.forEach((i=>{10!==l.length&&l.push(i)}))}return l},textCosineSimilarity(i,e){let s=this.cleanText(i),t=this.cleanText(e);const l=this.wordCountMap(s),a=this.wordCountMap(t);let o={};this.addWordsToDict(l,o),this.addWordsToDict(a,o);const n=this.vectorization(l,o),r=this.vectorization(a,o);return this.cosineSimilarity(n,r)},cleanText(i){return i=i.toLowerCase(),i=i.replace(/[^а-яa-z\s]/g,""),i},wordCountMap(i){let e=i.split(" "),s={};return e.forEach((i=>{s[i]=(s[i]||0)+1})),s},addWordsToDict(i,e){for(let s in i)e[s]=!0},vectorization(i,e){let s=[];for(let t in e)s.push(i[t]||0);return s},cosineSimilarity(i,e){let s=0;for(let a=0;a<i.length;a++)s+=i[a]*e[a];let t=0,l=0;for(let a=0;a<i.length;a++)t+=i[a]*i[a],l+=e[a]*e[a];return t=Math.sqrt(t),l=Math.sqrt(l),s/(t*l)},updateWidth(){this.sizeWimdow=window.innerWidth}},created(){window.addEventListener("resize",this.updateWidth)},watch:{_allFilms(){this.getSimilarFilms()},sizeWimdow(){this.getSimilarFilms()}},computed:{...(0,I.rn)({_allFilms:i=>i.allFilms})}};const te=(0,w.Z)(se,[["render",ie],["__scopeId","data-v-7664742d"]]);var le=te,ae={components:{MyMain:bi,FilmCardBig:Ji,FilmCardSmall:J,RecommendationFilms:le},data(){return{infoFilmId:{},filmId:this.$route.params.id,isSearch:!1}},props:{allFilms:{type:Array,default:()=>[]},searchNameFilm:String},methods:{getInfoFilm(){this.infoFilmId=this.allFilms.filter((i=>i.id===parseInt(this.filmId)))[0]}},watch:{allFilms(){this.getInfoFilm()},$route(i,e){this.filmId=this.$route.params.id,window.location.reload()},searchNameFilm(){let i=this.searchNameFilm;i=i.trim(),i=i.toLowerCase(),""!==i?(this.isSearch=!0,this.$refs.main.searchFilms(i)):this.isSearch=!1}}};const oe=(0,w.Z)(ae,[["render",Si],["__scopeId","data-v-216733e6"]]);var ne=oe;const re=(0,l._)("nav",null,[(0,l._)("div",{class:"nav nav-tabs",id:"nav-tab",role:"tablist"},[(0,l._)("button",{class:"nav-link active",id:"nav-bookmarks-tab","data-bs-toggle":"tab","data-bs-target":"#nav-bookmarks",type:"button",role:"tab","aria-controls":"nav-bookmarks","aria-selected":"true"}," Закладки "),(0,l._)("button",{class:"nav-link",id:"nav-estimates-tab","data-bs-toggle":"tab","data-bs-target":"#nav-estimates",type:"button",role:"tab","aria-controls":"nav-estimates","aria-selected":"false"}," Оценки ")])],-1),me={class:"tab-content",id:"nav-tabContent"},de={class:"tab-pane fade show active",id:"nav-bookmarks",role:"tabpanel","aria-labelledby":"nav-bookmarks-tab",tabindex:"0"},ce={class:"tab-pane fade",id:"nav-estimates",role:"tabpanel","aria-labelledby":"nav-estimates-tab",tabindex:"0"};function he(i,e,s,t,a,o){const n=(0,l.up)("MyMain");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",{class:(0,M.C_)(["bookmarks-estimates",""!==s.searchNameFilm.trim()?"block-none":""])},[re,(0,l._)("div",me,[(0,l._)("div",de,[(0,l.Wm)(n,{allFilms:a.bookmarks,ref:"main",class:"bookmarksFilms"},null,8,["allFilms"])]),(0,l._)("div",ce,[(0,l.Wm)(n,{allFilms:a.estimates,ref:"main",class:"myEstimatesFilms"},null,8,["allFilms"])])])],2),(0,l.Wm)(n,{allFilms:s.allFilms,ref:"main",class:(0,M.C_)({"block-none":""===s.searchNameFilm.trim()})},null,8,["allFilms","class"])],64)}var ue={components:{MyMain:bi},data(){return{masLocalStorage:{bookmarks:[],like:[],dislike:[]},bookmarks:[],estimates:[]}},props:{allFilms:{type:Array,default:()=>[]},searchNameFilm:String},computed:{...(0,I.rn)({allBookmarks:i=>i.businessLogicBookmarks.bookmarks,allLikes:i=>i.businessLogicLike.like,allDislikes:i=>i.businessLogicDislike.dislike})},mounted(){this.getBookmarks(),this.getEstimates()},methods:{getBookmarks(){this.bookmarks=this.allFilms.filter((i=>this.allBookmarks.includes(i.id)))},getEstimates(){this.estimates=this.allFilms.filter((i=>this.allLikes.includes(i.id)||this.allDislikes.includes(i.id)))}},watch:{allFilms(){this.getBookmarks(),this.getEstimates()},searchNameFilm(){let i=this.searchNameFilm;i=i.trim(),i=i.toLowerCase(),""!==i&&this.$refs.main.searchFilms(i)}}};const ke=(0,w.Z)(ue,[["render",he]]);var ge=ke;const pe=[{path:"/",name:"main",component:bi},{path:"/film/:id",name:"film",component:ne},{path:"/BookmarksEstimates",name:"BookmarksEstimates",component:ge}],Fe=(0,E.p7)({history:(0,E.PO)("/kino_poisk/"),routes:pe});var fe=Fe,ve=s(4161),Ae={state:()=>({bookmarks:JSON.parse(localStorage.getItem("bookmarks")||"[]")}),mutations:{pushBookmarks(i,e){i.bookmarks.push(e)},setBookmarks(i,e){i.bookmarks=e}},actions:{addBookmarks({commit:i,dispatch:e},s){i("pushBookmarks",s),e("saveLocalStorage")},deleteBookmarks({state:i,commit:e,dispatch:s},t){e("setBookmarks",i.bookmarks.filter((i=>i!==t))),s("saveLocalStorage")},saveLocalStorage({state:i}){localStorage.setItem("bookmarks",JSON.stringify(i.bookmarks))}}},be={state:()=>({like:JSON.parse(localStorage.getItem("like")||"[]")}),mutations:{pushLike(i,e){i.like.push(e)},setLike(i,e){i.like=e}},actions:{addLike({commit:i,dispatch:e},s){i("pushLike",s),e("saveLocalStorage")},deleteLike({state:i,commit:e,dispatch:s},t){e("setLike",i.like.filter((i=>i!==t))),s("saveLocalStorage")},saveLocalStorage({state:i}){localStorage.setItem("like",JSON.stringify(i.like))}}},Se={state:()=>({dislike:JSON.parse(localStorage.getItem("dislike")||"[]")}),mutations:{pushDislike(i,e){i.dislike.push(e)},setDislike(i,e){i.dislike=e}},actions:{addDislike({commit:i,dispatch:e},s){i("pushDislike",s),e("saveLocalStorage")},deleteDislike({state:i,commit:e,dispatch:s},t){e("setDislike",i.dislike.filter((i=>i!==t))),s("saveLocalStorage")},saveLocalStorage({state:i}){localStorage.setItem("dislike",JSON.stringify(i.dislike))}}},we=(0,I.MT)({state:()=>({allFilms:[]}),mutations:{setAllFilms(i,e){i.allFilms=e}},actions:{async fetchFilms({state:i,commit:e}){ve.Z.get("https://anastasiia29sh.github.io/api_kino/kinopoisk.json").then((i=>{e("setAllFilms",i.data.docs)}))}},modules:{businessLogicBookmarks:Ae,businessLogicLike:be,businessLogicDislike:Se}});let De=(0,t.ri)(N);De.use(we).use(fe).mount("#app")}},e={};function s(t){var l=e[t];if(void 0!==l)return l.exports;var a=e[t]={exports:{}};return i[t].call(a.exports,a,a.exports,s),a.exports}s.m=i,function(){var i=[];s.O=function(e,t,l,a){if(!t){var o=1/0;for(d=0;d<i.length;d++){t=i[d][0],l=i[d][1],a=i[d][2];for(var n=!0,r=0;r<t.length;r++)(!1&a||o>=a)&&Object.keys(s.O).every((function(i){return s.O[i](t[r])}))?t.splice(r--,1):(n=!1,a<o&&(o=a));if(n){i.splice(d--,1);var m=l();void 0!==m&&(e=m)}}return e}a=a||0;for(var d=i.length;d>0&&i[d-1][2]>a;d--)i[d]=i[d-1];i[d]=[t,l,a]}}(),function(){s.n=function(i){var e=i&&i.__esModule?function(){return i["default"]}:function(){return i};return s.d(e,{a:e}),e}}(),function(){s.d=function(i,e){for(var t in e)s.o(e,t)&&!s.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(i){if("object"===typeof window)return window}}()}(),function(){s.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)}}(),function(){var i={143:0};s.O.j=function(e){return 0===i[e]};var e=function(e,t){var l,a,o=t[0],n=t[1],r=t[2],m=0;if(o.some((function(e){return 0!==i[e]}))){for(l in n)s.o(n,l)&&(s.m[l]=n[l]);if(r)var d=r(s)}for(e&&e(t);m<o.length;m++)a=o[m],s.o(i,a)&&i[a]&&i[a][0](),i[a]=0;return s.O(d)},t=self["webpackChunkkinopoisk"]=self["webpackChunkkinopoisk"]||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var t=s.O(void 0,[998],(function(){return s(7491)}));t=s.O(t)})();
//# sourceMappingURL=app.209765ee.js.map